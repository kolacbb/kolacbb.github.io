"use strict";(self["webpackChunkAppLocalize"]=self["webpackChunkAppLocalize"]||[]).push([[369],{2933:function(t,e,a){a.d(e,{B:function(){return i},Cl:function(){return p},Fx:function(){return u},Uc:function(){return f},_I:function(){return d},e5:function(){return l},fl:function(){return c},fx:function(){return m},mW:function(){return s},th:function(){return g},ty:function(){return o},x4:function(){return r}});var n=a(3329);const r=t=>n.Z.post("/user/login",t),l=t=>n.Z.post("/project/get",t),s=t=>n.Z.post("/project/all",t),i=t=>n.Z.post("/project/add",t),o=t=>n.Z.post("/project/update",t),g=t=>n.Z.post("/project/delete",t),u=t=>n.Z.post("/string/get",t),c=t=>n.Z.post("/string/delete",t),d=t=>n.Z.post("/string/add",t),p=t=>n.Z.post("/string/update",t),m=t=>n.Z.post("/string/translate",t),f=t=>n.Z.post("string/translate/single",t)},6369:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"container"},[e("div",{staticClass:"App"},[e("el-card",{staticClass:"ProjectCard"},[e("div",{staticStyle:{display:"flex","justify-content":"end","align-items":"center"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.translateDlgVisible=!0}}},[t._v("Request Translate")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("Add String")])],1),e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","background-color":"#f8f9fa"}},[e("span",[t._v("All Strings")]),e("div",[e("el-select",{attrs:{filterable:""},model:{value:t.languagesSelected,callback:function(e){t.languagesSelected=e},expression:"languagesSelected"}},t._l(t.languagesOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("i",{staticClass:"icon el-icon-download"})],1)]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.strings,stripe:"","empty-text":"No Data"}},[e("el-table-column",{attrs:{prop:"transId",label:"ID"}}),e("el-table-column",{attrs:{prop:"transKey",label:"Key"}}),e("el-table-column",{attrs:{prop:"context",label:"Context"}}),t._l(t.languages,(function(a,n){return e("el-table-column",{key:n,attrs:{label:t.getLanguageLabel(a),"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row[a])+" ")]}}],null,!0)})})),e("el-table-column",{attrs:{fixed:"right",label:"Operate",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleEditString(a.row)}}},[t._v("Edit")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.showDeleteStringDlg(a.row)}}},[t._v("Delete")])]}}])})],2)],1)],1),e("el-dialog",{attrs:{title:"Add String",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"stringForm",attrs:{model:t.stringForm,rules:t.rules}},[e("el-form-item",{attrs:{label:"Key",prop:"projectName"}},[e("el-input",{model:{value:t.stringForm.transKey,callback:function(e){t.$set(t.stringForm,"transKey",e)},expression:"stringForm.transKey"}})],1),e("el-form-item",{attrs:{label:"Context",prop:"languages"}},[e("el-input",{model:{value:t.stringForm.transContext,callback:function(e){t.$set(t.stringForm,"transContext",e)},expression:"stringForm.transContext"}})],1),e("el-form-item",{attrs:{label:"Name(English)",prop:"languages"}},[e("el-input",{model:{value:t.stringForm.en,callback:function(e){t.$set(t.stringForm,"en",e)},expression:"stringForm.en"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleAddString}},[t._v("Add")])],1)],1),e("el-dialog",{attrs:{title:"Edit String",visible:t.isUpdateStringEmpty,width:"30%"},on:{"update:visible":function(e){t.isUpdateStringEmpty=e}}},[e("el-form",{ref:"editStringForm",attrs:{model:t.editStringForm,rules:t.rules}},[e("el-form-item",{attrs:{label:"Key",prop:"transKey"}},[e("el-input",{model:{value:t.editStringForm.transKey,callback:function(e){t.$set(t.editStringForm,"transKey",e)},expression:"editStringForm.transKey"}})],1),e("el-form-item",{attrs:{label:"Context",prop:"context"}},[e("el-input",{model:{value:t.editStringForm.transContext,callback:function(e){t.$set(t.editStringForm,"transContext",e)},expression:"editStringForm.transContext"}})],1),e("el-form-item",{attrs:{label:"Name(English)",prop:"EN"}},[e("el-input",{model:{value:t.editStringForm.en,callback:function(e){t.$set(t.editStringForm,"en",e)},expression:"editStringForm.en"}})],1),e("el-form-item",{attrs:{label:"Value",prop:"value"}},[e("el-input",{model:{value:t.editStringForm[t.languages[t.languages.length-1]],callback:function(e){t.$set(t.editStringForm,t.languages[t.languages.length-1],e)},expression:"editStringForm[languages[languages.length - 1]]"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleTranslateStrings}},[t._v("Translate")]),e("el-button",{on:{click:function(e){t.editStringForm={}}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleUpdateString}},[t._v("Update")])],1)],1),e("el-dialog",{attrs:{title:"Request Translate",visible:t.translateDlgVisible,width:"30%"},on:{"update:visible":function(e){t.translateDlgVisible=e}}},[e("el-form",{attrs:{model:t.requestTransFrom}},[e("el-form-item",{attrs:{label:"Target Language","label-width":"120px"}},[e("el-select",{attrs:{placeholder:""},model:{value:t.requestTransFrom.targetLanguage,callback:function(e){t.$set(t.requestTransFrom,"targetLanguage",e)},expression:"requestTransFrom.targetLanguage"}},t._l(t.languages,(function(a){return e("el-option",{attrs:{label:t.getLanguageLabel(a),value:t.getLanguageValue(a)}})})),1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.translateDlgVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleRequestTranslate}},[t._v("Send")])],1)],1),e("el-dialog",{attrs:{title:"Hint",visible:t.isDeleteStringEmpty,width:"30%"},on:{"update:visible":function(e){t.isDeleteStringEmpty=e}}},[e("span",[t._v("Are you sure delete "+t._s(t.deleteStringData.transKey)+"? ")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.deleteStringData={}}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleDeleteString}},[t._v("Confirm")])],1)])],1)},r=[],l=(a(7658),a(2933)),s=a(6693),i={data(){return{isLoading:!0,dialogVisible:!1,translateDlgVisible:!1,strings:[],stringForm:{projectId:this.$route.params.id,transKey:"",transContext:"",en:""},editStringForm:{},requestTransFrom:{targetLanguage:""},rules:{transKey:[{required:!0}]},languages:[],deleteStringData:{},languagesOptions:[],languagesSelected:"EN"}},mounted(){this.refreshPage()},computed:{projectData(){return this.$store.state.tab.projectData},getColumnLanguage(t){return console.log(t),this.$store.state.allLanguages[t]},isDeleteStringEmpty(){return null!=this.deleteStringData.transId},isUpdateStringEmpty(){return null!=this.editStringForm.transId}},watch:{projectData(t,e){this.$route.params.id==this.$store.state.tab.projectData.projectId&&this.refreshPage()},languagesSelected(t,e){t!=e&&this.refreshStrings()}},methods:{handleEditString(t){this.editStringForm=t},refreshPage(){const t=this.$store.state.tab.projectData;if(this.$route.params.id!=t.projectId)return;const e=[];t.languages.split(",").forEach((t=>{e.push(t.trim())})),Object.keys(s.Z.state.allLanguages).forEach((t=>{e.includes(s.Z.state.languageKey[t])&&this.languagesOptions.push({label:s.Z.state.allLanguages[t],value:s.Z.state.languageKey[t]})})),this.refreshStrings()},refreshStrings(){let t="EN, "+this.languagesSelected;const e={projectId:this.$route.params.id,languages:t,pageSize:20,pageNum:0};(0,l.Fx)(e).then((t=>{console.log(t),this.strings=t.data.strings,this.languages=t.data.languageKey,this.isLoading=!1}))},showDeleteStringDlg(t){this.deleteStringData=t},handleDeleteString(t){const e={transId:this.deleteStringData.transId};console.log(t),(0,l.fl)(e).then((t=>{t.code}))},getLanguageLabel(t){return s.Z.state.allLanguages[t]},getLanguageValue(t){return s.Z.state.languageKey[t]},handleRequestTranslate(){const t={projectId:this.$route.params.id,targetLanguage:this.requestTransFrom.targetLanguage};console.log(t),(0,l.fx)(t).then((t=>{200==t.code&&(this.translateDlgVisible=!1)}))},handleAddString(){this.$refs.stringForm.validate((t=>{console.log(t,"valid"),t&&(this.dialogVisible=!1,(0,l._I)(this.stringForm).then((t=>{200==t.code&&this.strings.add(t.data)})))}))},handleUpdateString(){(0,l.Cl)(this.editStringForm).then((t=>{200==t.code&&(this.editStringForm={})}))},handleTranslateStrings(){(0,l.Uc)(this.editStringForm).then((t=>{200==t.code&&(this.editStringForm={})}))}}},o=i,g=a(3736),u=(0,g.Z)(o,n,r,!1,null,"3b652bbe",null),c=u.exports}}]);
//# sourceMappingURL=369.5f419ae4.js.map