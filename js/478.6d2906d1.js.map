{"version":3,"file":"js/478.6d2906d1.js","mappings":"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","sources":["webpack://AppLocalize/./src/api/user.js","webpack://AppLocalize/./src/views/UserTranslate.vue","webpack://AppLocalize/src/views/UserTranslate.vue","webpack://AppLocalize/./src/views/UserTranslate.vue?bd9c","webpack://AppLocalize/./src/views/UserTranslate.vue?b5fd"],"sourcesContent":["import http from \"@/utils/request\";\n\n\nexport const getLanguages = (data) => {\n    return http.post(\"/translate/languages\", data)\n}\n\nexport const getStrings = (data) => {\n    return http.post(\"/translate/get\", data)\n}\n\nexport const submitStrings = (data) => {\n    return http.post(\"/translate/submit\", data)\n}\n\nexport const formatTranslate = (data) => {\n    let config = {\n        headers: {\"Content-Type\": \"multipart/form-data\"}\n    }\n    return http.postForm(\"/translate/formatted\", data, config)\n}","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"container\"},[_c('div',{staticClass:\"App\"},[_c('h1',{staticStyle:{\"font-size\":\"18px\",\"color\":\"#999999\"}},[_vm._v(_vm._s(_vm.title))]),_c('span',{staticStyle:{\"font-size\":\"20px\"}},[_vm._v(_vm._s(_vm.desc))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.getQueryTl),expression:\"!getQueryTl\"}]},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.localLanguage.name != null),expression:\"localLanguage.name != null\"}]},[_c('h1',{staticStyle:{\"font-size\":\"18px\",\"color\":\"#999999\"}},[_vm._v(\"Local Languages\")]),_c('div',{staticClass:\"Option\",on:{\"click\":function($event){return _vm.handleLanguage(_vm.localLanguage)}}},[_c('a',[_vm._v(_vm._s(_vm.localLanguage.name))])]),_c('h1',{staticStyle:{\"font-size\":\"18px\",\"color\":\"#999999\"}},[_vm._v(\"More languages\")])]),_vm._l((_vm.languages),function(item){return _c('div',{staticClass:\"Option\",on:{\"click\":function($event){return _vm.handleLanguage(item)}}},[_c('a',[_vm._v(_vm._s(item.name))])])})],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.getQueryTl && !_vm.showResult),expression:\"getQueryTl && !showResult\"}]},[_c('span',{staticStyle:{\"font-size\":\"18px\",\"color\":\"#999999\"}},[_vm._v(\"You do not need to enter all translations before submitting, partial submissions are accepted.\")]),_vm._l((_vm.strings),function(item){return _c('div',{staticClass:\"Input\"},[_c('h3',[_vm._v(_vm._s(item[_vm.sourceField]))]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.value),expression:\"item.value\"}],attrs:{\"dir\":\"auto\",\"placeholder\":\"\"},domProps:{\"value\":(item.value)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(item, \"value\", $event.target.value)}}})])})],2),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.getQueryTl && !_vm.showResult),expression:\"getQueryTl && !showResult\"}],staticClass:\"Button\",attrs:{\"loading\":_vm.isSubmitLoading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"Submit\")]),_vm._m(0)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"height\":\"200px\",\"margin-top\":\"60px\"}},[_c('h4',{staticStyle:{\"text-align\":\"center\",\"color\":\"#999\"}},[_vm._v(\"@Power by AppLocalize.top\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n\n  <div class=\"container\" v-loading=\"isLoading\">\n    <div class=\"App\">\n      <h1 style=\"font-size: 18px; color: #999999\">{{ title }}</h1>\n      <span style=\"font-size: 20px; \">{{ desc }}</span>\n\n      <div v-show=\"!getQueryTl\">\n\n        <div v-show=\"localLanguage.name != null\">\n          <h1 style=\"font-size: 18px; color: #999999\">Local Languages</h1>\n          <div @click=\"handleLanguage(localLanguage)\" class=\"Option\">\n            <a>{{ localLanguage.name }}</a>\n          </div>\n\n          <h1 style=\"font-size: 18px; color: #999999\">More languages</h1>\n        </div>\n\n        <div @click=\"handleLanguage(item)\" class=\"Option\" v-for=\"item in languages\">\n          <a>{{ item.name }}</a>\n        </div>\n      </div>\n\n\n      <div v-show=\"getQueryTl && !showResult\">\n\n        <span style=\"font-size: 18px; color: #999999\">You do not need to enter all translations before submitting, partial submissions are accepted.</span>\n\n        <div class=\"Input\" v-for=\"item in strings\">\n          <h3>{{ item[sourceField] }}</h3>\n          <textarea dir=\"auto\" v-model=\"item.value\" placeholder=\"\"/>\n        </div>\n      </div>\n\n      <el-button v-show=\"getQueryTl && !showResult\" :loading=\"isSubmitLoading\" class=\"Button\" @click=\"handleSubmit\">Submit</el-button>\n\n      <div style=\"height: 200px; margin-top: 60px;\">\n        <h4 style=\"text-align: center; color: #999\">@Power by AppLocalize.top</h4>\n      </div>\n\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport {getLanguages, getStrings, submitStrings} from \"../api/user\"\nexport default {\n  data() {\n    return {\n      title: 'Help Translate',\n      desc: 'Choose a language',\n      isLoading: true,\n      sourceField: 'en',\n      targetField: 'en',\n      showResult: false,\n      isSubmitLoading: false,\n      localLanguage: {},\n      languages: [],\n      strings: []\n    }\n  },\n  mounted() {\n      this.requestServerData()\n  },\n  watch: {\n    '$route.query.tl': {\n      handler(newVal, oldVal) {\n        this.requestServerData()\n      }\n    },\n    '$route.query.sl': {\n      handler(newVal, oldVal) {\n        this.requestServerData()\n      }\n    }\n  },\n  methods: {\n    handleLanguage(item) {\n      this.$router.push({\n        path: \"/translate/\" + this.$route.params.id,\n        query: {tl: item.key}\n      })\n    },\n    handleSubmit() {\n      this.isSubmitLoading = true\n      const request = {\n        \"projectKey\": this.$route.params.id,\n        \"srcLanguage\": \"en\",\n        \"toLanguage\": this.$route.query.tl,\n        \"data\": []\n      }\n\n      this.strings.forEach((item) => {\n        if (item.value !== undefined && item.value !== \"\" && item.value !== item[this.targetField]) {\n          const d = {\"transId\": item.transId, \"english\": item.en, \"source\": item[this.targetField],  \"value\": item.value}\n          request.data.push(d)\n        }\n      })\n      submitStrings(request).then((data) => {\n        this.isSubmitLoading = false\n        if (data.code == 200) {\n          this.desc = \"Submitted successfully, thank you for your contribution.\";\n          this.showResult = true;\n        }\n      })\n\n    },\n    requestServerData() {\n      const projectKey = this.$route.params.id;\n      const query = this.getQueryTl;\n      const sourceLang = this.getSourceLang\n\n      const request = {\n        \"key\": projectKey,\n        \"sourceKey\": sourceLang,\n        \"targetKey\": query\n      };\n      this.showResult = false;\n      this.isLoading = true\n\n      if (projectKey !== undefined && query !== undefined) {\n        this.title = \"\"\n        this.desc = \"\"\n        getStrings(request).then((data) => {\n          this.isLoading = false\n          if (data.code == 200) {\n            this.targetField = data.data.targetField;\n            this.sourceField = data.data.sourceField;\n\n            data.data.strings.forEach((item) => {\n              item.value = item[this.targetField]\n            })\n            this.strings = data.data.strings;\n            this.title = data.data.projectName;\n            this.desc = \"Submit translations for \" + data.data.targetLanguage\n          }\n        })\n      } else {\n        this.title = \"Help Translate\"\n        this.desc = \"Choose a language\"\n        getLanguages(request).then((data) => {\n          this.isLoading = false\n          if (data.code == 200) {\n            this.languages = data.data.sort((a, b) => {\n              return a.name.localeCompare(b.name)\n            });\n            const localLanguageKey = navigator.language.split(\"-\")[0].toLowerCase()\n            this.languages.forEach((item) => {\n              let lk = item.key.split(\"_\")[0].toLowerCase()\n              if (localLanguageKey.includes(lk)) {\n                console.log(localLanguageKey,  lk);\n                this.localLanguage = item\n              }\n            })\n          }\n        })\n      }\n    }\n  },\n\n  computed: {\n    getQueryTl() {\n        return this.$route.query.tl\n    },\n    getSourceLang() {\n      if (this.$route.query.sl == null) {\n        return \"EN\"\n      } else {\n        return this.$route.query.sl\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.container {\n  margin: 20px;\n}\n\n.App {\n  width: 100%;\n  margin: auto\n}\n\n@media only screen and (min-width: 600px) {\n  .App {\n    width: 600px\n  }\n}\n.Option {\n  width: calc(100% - 60px);\n  padding: 24px;\n  font-size: 18px;\n  font-weight: 700;\n  background-color: #eee;\n  border-radius: 100px;\n  text-align: center;\n  margin-top: 30px;\n  text-decoration: none;\n  color: #000\n}\n\n.Option:hover {\n  color: #fff;\n  background-color: #101010\n}\n\n.Header, .Input {\n  padding-bottom: 20px\n}\n\n.Input {\n  padding-top: 6px\n}\n\n.Input h3 {\n  color: #000\n}\n\n.Input input, textarea {\n  width: calc(100% - 40px);\n  padding: 20px;\n  font-size: 20px;\n  border-radius: 10px;\n  border: 1px solid #ccc;\n  resize: vertical;\n}\n.Button {\n  margin-top: 20px;\n  cursor: pointer;\n  width: 100%;\n  background-color: #3baf72;\n  color: #fff;\n  border: 0;\n  border-radius: 8px;\n  padding: 20px;\n  font-size: 20px;\n  font-weight: 700\n}\n</style>","import mod from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserTranslate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserTranslate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserTranslate.vue?vue&type=template&id=54188428&scoped=true&\"\nimport script from \"./UserTranslate.vue?vue&type=script&lang=js&\"\nexport * from \"./UserTranslate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserTranslate.vue?vue&type=style&index=0&id=54188428&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54188428\",\n  null\n  \n)\n\nexport default component.exports"],"names":["getLanguages","data","http","post","getStrings","submitStrings","formatTranslate","config","headers","postForm","render","_vm","this","_c","_self","directives","name","rawName","value","isLoading","expression","staticClass","staticStyle","_v","_s","title","desc","getQueryTl","localLanguage","on","$event","handleLanguage","_l","languages","item","showResult","strings","sourceField","attrs","domProps","target","composing","$set","isSubmitLoading","handleSubmit","_m","staticRenderFns","targetField","mounted","requestServerData","watch","handler","newVal","oldVal","methods","$router","push","path","$route","params","id","query","tl","key","request","forEach","undefined","d","transId","en","then","code","projectKey","sourceLang","getSourceLang","projectName","targetLanguage","sort","a","b","localeCompare","localLanguageKey","navigator","language","split","toLowerCase","lk","includes","console","log","computed","sl","component"],"sourceRoot":""}