"use strict";(self["webpackChunkAppLocalize"]=self["webpackChunkAppLocalize"]||[]).push([[762],{1762:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"container"},[t("div",{staticClass:"App"},[t("h1",{staticStyle:{"font-size":"18px",color:"#999999"}},[e._v(e._s(e.title))]),t("span",{staticStyle:{"font-size":"20px"}},[e._v(e._s(e.desc))]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.getQueryTl,expression:"!getQueryTl"}]},[t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.localLanguage.name,expression:"localLanguage.name != null"}]},[t("h1",{staticStyle:{"font-size":"18px",color:"#999999"}},[e._v("Local Languages")]),t("div",{staticClass:"Option",on:{click:function(t){return e.handleLanguage(e.localLanguage)}}},[t("a",[e._v(e._s(e.localLanguage.name))])]),t("h1",{staticStyle:{"font-size":"18px",color:"#999999"}},[e._v("More languages")])]),e._l(e.languages,(function(a){return t("div",{staticClass:"Option",on:{click:function(t){return e.handleLanguage(a)}}},[t("a",[e._v(e._s(a.name))])])}))],2),t("div",{directives:[{name:"show",rawName:"v-show",value:e.getQueryTl&&!e.showResult,expression:"getQueryTl && !showResult"}]},[t("span",{staticStyle:{"font-size":"18px",color:"#999999"}},[e._v("You do not need to enter all translations before submitting, partial submissions are accepted.")]),e._l(e.strings,(function(a){return t("div",{staticClass:"Input"},[t("h3",[e._v(e._s(a.en))]),60<a.en.length?t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{dir:"auto",placeholder:""},domProps:{value:a.value},on:{input:function(t){t.target.composing||e.$set(a,"value",t.target.value)}}}):e._e(),e._v(" "),a.en.length<=60?t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"text",placeholder:""},domProps:{value:a.value},on:{input:function(t){t.target.composing||e.$set(a,"value",t.target.value)}}}):e._e()])}))],2),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.getQueryTl&&!e.showResult,expression:"getQueryTl && !showResult"}],staticClass:"Button",attrs:{loading:e.isSubmitLoading},on:{click:e.handleSubmit}},[e._v("Submit")]),e._m(0)],1)])},i=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"200px","margin-top":"60px"}},[t("h4",{staticStyle:{"text-align":"center",color:"#999"}},[e._v("@Power by AppLocalize.top")])])}],n=(a(7658),a(3329));const l=e=>n.Z.post("/translate/languages",e),o=e=>n.Z.post("/translate/get",e),r=e=>n.Z.post("/translate/submit",e);var u={data(){return{title:"Help Translate",desc:"Choose a language",isLoading:!0,targetField:"en",showResult:!1,isSubmitLoading:!1,localLanguage:{},languages:[],strings:[]}},mounted(){this.requestServerData()},watch:{"$route.query.tl":{handler(e,t){this.requestServerData()}}},methods:{handleLanguage(e){this.$router.push({path:"/translate/"+this.$route.params.id,query:{tl:e.key}})},handleSubmit(){this.isSubmitLoading=!0;const e={projectKey:this.$route.params.id,srcLanguage:"en",toLanguage:this.$route.query.tl,data:[]};this.strings.forEach((t=>{if(void 0!==t.value&&""!==t.value&&t.value!==t[this.targetField]){const a={transId:t.transId,value:t.value};e.data.push(a)}})),r(e).then((e=>{this.isSubmitLoading=!1,200==e.code&&(this.desc="Submitted successfully, thank you for your contribution.",this.showResult=!0)}))},requestServerData(){const e=this.$route.params.id,t=this.getQueryTl,a={key:e,targetKey:t};this.showResult=!1,this.isLoading=!0,void 0!==e&&void 0!==t?(this.title="",this.desc="",o(a).then((e=>{this.isLoading=!1,200==e.code&&(this.targetField=e.data.targetField,e.data.strings.forEach((e=>{e.value=e[this.targetField]})),this.strings=e.data.strings,this.title=e.data.projectName,this.desc="Submit translations for "+e.data.targetLanguage)}))):(this.title="Help Translate",this.desc="Choose a language",l(a).then((e=>{if(this.isLoading=!1,200==e.code){this.languages=e.data.sort(((e,t)=>e.name.localeCompare(t.name)));const t=navigator.language.split("-")[0].toLowerCase();this.languages.forEach((e=>{let a=e.key.split("_")[0].toLowerCase();t.includes(a)&&(console.log(t,a),this.localLanguage=e)}))}})))}},computed:{getQueryTl(){return this.$route.query.tl}}},c=u,g=a(3736),d=(0,g.Z)(c,s,i,!1,null,"c65a68d0",null),h=d.exports}}]);
//# sourceMappingURL=762.5c5877ee.js.map