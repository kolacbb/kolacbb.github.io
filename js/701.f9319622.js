"use strict";(self["webpackChunkAppLocalize"]=self["webpackChunkAppLocalize"]||[]).push([[701],{5272:function(t,e,s){s.d(e,{Bg:function(){return a},Zj:function(){return n},c6:function(){return o},iN:function(){return l}});var i=s(3329);const a=t=>i.Z.post("/submit/all",t),l=t=>i.Z.post("/submit/get",t),o=t=>i.Z.post("/submit/accept",t),n=t=>i.Z.post("/submit/delete",t)},5701:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"container"},[e("div",{staticClass:"App"},[e("el-card",{staticClass:"ProjectCard"},[e("div",{staticStyle:{display:"flex","justify-content":"end","align-items":"center"}},[e("el-button",{attrs:{loading:t.isLoadListingLoading,type:"primary"},on:{click:t.loadGooglePlayListing}},[t._v("Load Google Play Listing")]),e("el-button",{attrs:{loading:t.isUploadListingLoading,type:"primary"},on:{click:t.uploadGooglePlayListing}},[t._v("Upload Google Play Listing")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.translateDlgVisible=!0}}},[t._v("Request Translate")])],1),e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","background-color":"#f8f9fa"}},[e("span",[t._v("Listing assets")])]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listingData,stripe:"","empty-text":"No Data"}},[e("el-table-column",{attrs:{prop:"languageKey",label:"Language",formatter:t.languageFormat}}),e("el-table-column",{attrs:{prop:"status",label:"Status",formatter:t.statusFormat}}),e("el-table-column",{attrs:{prop:"updateTime",label:"Update time",formatter:t.dateFormat}}),e("el-table-column",{attrs:{fixed:"right",label:"Operate",width:"100"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleOperatorSubmit(s.row)}}},[t._v("Review")])]}}])})],1)],1),e("el-dialog",{attrs:{title:"Request Translate",visible:t.translateDlgVisible,width:"30%"},on:{"update:visible":function(e){t.translateDlgVisible=e}}},[e("el-form",[e("el-form-item",{attrs:{label:"Languages",prop:"languages"}},[e("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"",filterable:"","collapse-tags":"",placeholder:"Selected Languages"},model:{value:t.languagesSelected,callback:function(e){t.languagesSelected=e},expression:"languagesSelected"}},t._l(t.languagesOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.translateDlgVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleRequestTranslate}},[t._v("Translate")])],1)],1),e("el-dialog",{staticStyle:{"word-break":"break-all"},attrs:{title:"Listing assets",visible:t.listingDetailDlgVisible,width:"50%"},on:{"update:visible":function(e){t.listingDetailDlgVisible=e}}},[e("el-form",{ref:"storeListing",attrs:{model:t.storeListing,rules:t.rules}},[e("el-form-item",{attrs:{label:"App Name",prop:"appName"}},[e("el-input",{attrs:{maxlength:"30","show-word-limit":""},model:{value:t.storeListing.appName,callback:function(e){t.$set(t.storeListing,"appName",e)},expression:"storeListing.appName"}})],1),e("el-form-item",{attrs:{label:"Short Description",prop:"shortDesc"}},[e("el-input",{attrs:{maxlength:"80","show-word-limit":""},model:{value:t.storeListing.shortDesc,callback:function(e){t.$set(t.storeListing,"shortDesc",e)},expression:"storeListing.shortDesc"}})],1),e("el-form-item",{attrs:{label:"Full Description",prop:"fullDesc"}},[e("el-input",{attrs:{maxlength:"4000","show-word-limit":"",type:"textarea",autosize:{minRows:8,maxRows:8}},model:{value:t.storeListing.fullDesc,callback:function(e){t.$set(t.storeListing,"fullDesc",e)},expression:"storeListing.fullDesc"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleDeleteStoreListing()}}},[t._v("Delete")]),e("el-button",{on:{click:function(e){t.storeListing.listingId=0}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary",loading:t.isSubmitLoading},on:{click:t.updateStoreListing}},[t._v("Update")])],1)],1)],1)])},a=[],l=(s(7658),s(3329));const o=t=>l.Z.post("/listing/list",t),n=t=>l.Z.post("/listing/get",t),r=t=>l.Z.post("/listing/delete",t),g=t=>l.Z.post("/listing/update",t),u=t=>l.Z.post("/listing/load",t),c=t=>l.Z.post("/listing/translate",t),p=t=>l.Z.post("/listing/submit/google",t);var d=s(6693),h=(s(5272),{data(){return{isLoading:!0,isSubmitLoading:!1,isLoadListingLoading:!1,isUploadListingLoading:!1,translateDlgVisible:!1,listingData:[],storeListing:{listingId:0,appName:"",shortDesc:"",fullDesc:""},languagesOptions:[],languagesSelected:[]}},computed:{projectData(){return this.$store.state.tab.projectData},listingDetailDlgVisible(){return 0!=this.storeListing.listingId}},watch:{projectData(t,e){this.$route.params.id==this.$store.state.tab.projectData.projectId&&this.refreshPage()}},methods:{refreshPage(){const t=this.$store.state.tab.projectData;this.$route.params.id==t.projectId&&this.refreshListing()},refreshListing(){const t={projectId:this.$route.params.id};o(t).then((t=>{this.listingData=t.data,this.isLoading=!1;const e=this.$store.state.tab.projectData,s=[],i=[];this.languagesOptions=[],e.languages.split(",").forEach((t=>{s.push(t.trim())})),this.listingData.forEach((t=>{i.push(t.languageKey)})),console.log(s,i),Object.keys(d.Z.state.languages).forEach((t=>{console.log(t),s.includes(t)&&!i.includes(t)&&this.languagesOptions.push({label:d.Z.state.languages[t],value:t})}))}))},updateStoreListing(){this.isSubmitLoading=!0,g(this.storeListing).then((t=>{this.isSubmitLoading=!1,this.storeListing.listingId=0,console.log(t)}))},languageFormat(t,e){let s=t[e.property];return void 0==s?"":d.Z.state.languages[s]},statusFormat(t,e){let s=t[e.property];return void 0==s?"":0==s?"Done":1==s?"Empty":2==s?"Wait Apply":"Error"},dateFormat(t,e){let s=t[e.property];if(void 0==s)return"";let i=new Date(s);return i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()},handleDeleteStoreListing(t){const e={listingId:this.storeListing.listingId};r(e).then((t=>{this.storeListing.listingId=0,console.log(t)}))},handleOperatorSubmit(t){const e={listingId:t.listingId};n(e).then((t=>{console.log(t),this.storeListing=t.data,this.isLoading=!1}))},loadGooglePlayListing(){this.isLoadListingLoading=!0;const t={projectId:this.$route.params.id};u(t).then((t=>{this.isLoadListingLoading=!1,200==t.status&&this.refreshListing()}))},uploadGooglePlayListing(){this.isUploadListingLoading=!0;const t={projectId:this.$route.params.id};p(t).then((t=>{if(this.isUploadListingLoading=!1,200==t.status)return this.storeListing.listingId=0}))},handleRequestTranslate(){let t="";this.languagesSelected.forEach((e=>{t+=","+e})),t=t.slice(1);let e={projectId:this.$route.params.id};c(e).then((t=>{this.translateDlgVisible=!1}))}},mounted(){this.refreshPage()}}),m=h,f=s(3736),L=(0,f.Z)(m,i,a,!1,null,"06991dce",null),b=L.exports}}]);
//# sourceMappingURL=701.f9319622.js.map