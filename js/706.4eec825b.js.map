{"version":3,"file":"js/706.4eec825b.js","mappings":"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","sources":["webpack://AppLocalize/../src/FileSaver.js","webpack://AppLocalize/./src/components/ScreenPreview.vue","webpack://AppLocalize/src/components/ScreenPreview.vue","webpack://AppLocalize/./src/components/ScreenPreview.vue?18eb","webpack://AppLocalize/./src/components/ScreenPreview.vue?a1e9","webpack://AppLocalize/./src/views/project/Screenshots.vue","webpack://AppLocalize/./src/components/ScreenCanvas.vue","webpack://AppLocalize/src/components/ScreenCanvas.vue","webpack://AppLocalize/./src/components/ScreenCanvas.vue?b30f","webpack://AppLocalize/./src/components/ScreenCanvas.vue?9521","webpack://AppLocalize/./src/api/screenshot.js","webpack://AppLocalize/src/views/project/Screenshots.vue","webpack://AppLocalize/./src/views/project/Screenshots.vue?ef90","webpack://AppLocalize/./src/views/project/Screenshots.vue?4341"],"sourcesContent":["/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('canvas',{ref:\"screenCanvas\"},[_vm._v(\"Canvas not supported \"+_vm._s(_vm.refreshCanvas(_vm.text)))])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n  <canvas ref=\"screenCanvas\">Canvas not supported {{ refreshCanvas(text) }}</canvas>\n\n</template>\n\n<script>\nexport default {\n  props: [\"canvasWidth\", \"canvasHeight\", \"text\", \"textAlign\", \"backgroundColor\", \"frameImgUrl\", \"screenBlobImg\"],\n  data() {\n    return {\n    }\n  },\n  methods: {\n    refreshCanvas(data) {\n      // 自定义字体 https://www.zhihu.com/question/496036108\n      const width = this.canvasWidth; const height = this.canvasHeight;\n\n      const canvas = this.$refs.screenCanvas;\n      if (canvas == null) return\n      canvas.setAttribute(\"width\", width + \"\")\n      canvas.setAttribute(\"height\", height + \"\")\n\n      // canvas.style.width = this.canvasWidth / 4.5  + \"px\";\n      // canvas.style.height = this.canvasHeight / 4.5  + \"px\";\n\n      // 不支持canvas\n      if (!canvas.getContext) return\n\n      const ctx2d = canvas.getContext('2d');\n      // 绘制背景颜色\n      ctx2d.fillStyle = this.backgroundColor\n      ctx2d.fillRect(0,0, width, height);\n\n      // 选中的手机边框\n      const phoneFrame = {\n        path: this.frameImgUrl,\n        x: width * 0.05, // 外壳起点\n        y: height * 0.18,\n        width: 1564,\n        height: 3320,\n        startX: 59.4, // 内容起点\n        startY: 191.2,\n        endX: 1501.4, // 内容终点\n        endY: 3232.9,\n        extraY: 1548.8 // 关机按键\n      }\n\n      const phoneFrameToPrevScale = width * 0.9 / phoneFrame.width\n      phoneFrame.width = phoneFrame.width *  phoneFrameToPrevScale\n      phoneFrame.height = phoneFrame.height *  phoneFrameToPrevScale\n      phoneFrame.startX = phoneFrame.x + phoneFrame.startX *  phoneFrameToPrevScale\n      phoneFrame.startY = phoneFrame.y + phoneFrame.startY *  phoneFrameToPrevScale\n      phoneFrame.endX = phoneFrame.x + phoneFrame.endX *  phoneFrameToPrevScale\n      phoneFrame.endY = phoneFrame.y + phoneFrame.endY *  phoneFrameToPrevScale\n\n\n      // 绘制文字\n      if (this.text != null) {\n        const text = this.text.split(\"\\n\") // 切换真实换行\n        ctx2d.beginPath()\n        ctx2d.fillStyle = \"#FFFFFF\"\n        if (this.textAlign == 0) {\n          ctx2d.textAlign = \"left\"; // \"left\" || \"right\" || \"center\"\n          let upHeight = 1 < text.length? 64 : 100\n          for (let i = 0; i < text.length && i < 2; i++) {\n            ctx2d.font = \"bolder 74px Arial\"\n            ctx2d.fillText(text[i], phoneFrame.x + 12, 100 * (i + 1) + upHeight, width - phoneFrame.x * 2 - 12);\n          }\n        } else if (this.textAlign == 2) {\n          ctx2d.textAlign = \"right\"; // \"left\" || \"right\" || \"center\"\n          let upHeight = 1 < text.length? 64 : 100\n          for (let i = 0; i < text.length && i < 2; i++) {\n            ctx2d.font = \"bolder 74px Arial\"\n            ctx2d.fillText(text[i], width - phoneFrame.x - 12, 100 * (i + 1) + upHeight, width - phoneFrame.x * 2 - 12);\n          }\n        } else {\n          ctx2d.textAlign = \"center\"; // \"left\" || \"right\" || \"center\"\n          // 最多绘制两行\n          let upHeight = 1 < text.length? 64 : 100\n          for (let i = 0; i < text.length && i < 2; i++) {\n            ctx2d.font = \"bolder 74px Arial\"\n            ctx2d.fillText(text[i], width / 2, 100 * (i + 1) + upHeight, width - phoneFrame.x * 2);\n          }\n        }\n        ctx2d.closePath()\n      }\n\n      // 绘制手机截图\n\n      var screenImg = new Image();\n      screenImg.crossOrigin = \"Anonymous\";\n      // 创建 FileReader 对象\n      const reader = new FileReader();\n\n      // 设置读取完成时的回调函数\n      reader.onload = function (event) {\n        // 将读取的数据设置为 Image 对象的 src\n        screenImg.src = event.target.result;\n      };\n      reader.readAsDataURL(this.screenBlobImg);\n\n      screenImg.src = this.screenBlobImg;\n      screenImg.onload = function () {\n        // 手机截图保证内容区拉伸占满\n        const scale = Math.max((phoneFrame.endX - phoneFrame.startX) / this.width, (phoneFrame.endY - phoneFrame.endX) / this.height)\n        // console.log(\"width: \" + (phoneFrame.endX - phoneFrame.startX) / this.width + \" height: \" + this.height + \" scale: \" + scale);\n        ctx2d.drawImage(this, phoneFrame.startX, phoneFrame.startY, this.width * scale, this.height * scale);\n\n\n        // 绘制手机边框\n        let frameImg = new Image();\n        frameImg.src = phoneFrame.path;\n        console.log(\"path path\", phoneFrame.path)\n\n        frameImg.onload = function () {\n          ctx2d.drawImage(this, phoneFrame.x, phoneFrame.y, phoneFrame.width, phoneFrame.height)\n        }\n      }\n\n    },\n    exportImages() {\n      const canvas = this.$refs.screenCanvas;\n      var dataURL = canvas.toDataURL(\"image/png\"); // 将canvas转换为data URL\n      var canvasBlob = this.dataURLtoBlob(dataURL)\n\n      let fileOfBlob = new File([canvasBlob], new Date().getTime() + '.jpg')\n      return fileOfBlob\n    },\n    dataURLtoBlob(dataurl) {\n      var arr = dataurl.split(',')\n      //注意base64的最后面中括号和引号是不转译的\n      var _arr = arr[1].substring(0, arr[1].length - 2)\n      var mime = arr[0].match(/:(.*?);/)[1],\n          bstr = atob(_arr),\n          n = bstr.length,\n          u8arr = new Uint8Array(n)\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n)\n      }\n      return new Blob([u8arr], {\n        type: mime\n      })\n    }\n  },\n  mounted() {\n    this.refreshCanvas()\n  },\n  computed: {\n\n  },\n  watch: {\n    canvasWidth(newValue, oldValue) {\n      console.log('canvasWidth 变化:', newValue);\n      this.refreshCanvas(this.text)\n    },\n    canvasHeight(newValue, oldValue) {\n      console.log('canvasHeight 变化:', newValue);\n      // 处理 canvasHeight 变化的逻辑\n      this.refreshCanvas(this.text)\n    },\n    text(newValue, oldValue) {\n      console.log('text 变化:', newValue);\n      // 处理 text 变化的逻辑\n      this.refreshCanvas(this.text)\n    },\n    backgroundColor(newValue, oldValue) {\n      console.log('backgroundColor 变化:', newValue);\n      // 处理 backgroundColor 变化的逻辑\n      this.refreshCanvas(this.text)\n    },\n    frameImgUrl(newValue, oldValue) {\n      console.log('frameImgUrl 变化:', newValue);\n      // 处理 frameImgUrl 变化的逻辑\n      this.refreshCanvas(this.text)\n    },\n    screenBlobImg(newValue, oldValue) {\n      console.log('screenBlobImg 变化:', newValue);\n      this.refreshCanvas(this.text)\n      // 处理 screenBlobImg 变化的逻辑\n    },\n    textAlign(newValue, oldValue) {\n      console.log('screenBlobImg 变化:', newValue);\n      this.refreshCanvas(this.text)\n      // 处理 screenBlobImg 变化的逻辑\n    },\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ScreenPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ScreenPreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ScreenPreview.vue?vue&type=template&id=3e890c76&\"\nimport script from \"./ScreenPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./ScreenPreview.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"container\"},[_c('div',{staticClass:\"App\"},[_c('el-card',[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"end\",\"align-items\":\"center\"}},[_c('el-select',{attrs:{\"filterable\":\"\"},model:{value:(_vm.languagesSelected),callback:function ($$v) {_vm.languagesSelected=$$v},expression:\"languagesSelected\"}},_vm._l((_vm.languagesOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.downloadShell}},[_vm._v(\"Download\")]),_c('el-button',{attrs:{\"loading\":_vm.isUploadLoading,\"type\":\"primary\"},on:{\"click\":_vm.uploadGooglePlayAll}},[_vm._v(\"Upload to Google Play\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = true; _vm.isAddScreen = true}}},[_vm._v(\"Add Screenshot\")])],1),_c('el-row',_vm._l((_vm.pageData),function(item,i){return _c('el-col',{key:i,attrs:{\"span\":6}},[_c('div',{staticClass:\"drop-area\",staticStyle:{\"border\":\"1px solid #e0e0e0\",\"border-radius\":\"8px\",\"margin\":\"8px\",\"display\":\"flex\",\"flex-direction\":\"column\"}},[_c('div',{staticStyle:{\"height\":\"40px\",\"background-color\":\"white\",\"display\":\"flex\",\"justify-content\":\"space-between\",\"align-items\":\"center\"}},[_c('div',[_c('el-button',{staticStyle:{\"margin-left\":\"16px\",\"font-weight\":\"bold\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.handleSwap(_vm.pageData[i - 1], item)}}},[_vm._v(_vm._s('<'))]),_c('el-button',{staticStyle:{\"font-weight\":\"bold\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.handleSwap(item, _vm.pageData[i + 1])}}},[_vm._v(_vm._s('>'))])],1),_c('el-button',{staticStyle:{\"margin\":\"16px\",\"font-weight\":\"bold\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.addDialogVisible = true;  _vm.isAddScreen = false; _vm.screenshotFrom = item}}},[_vm._v(\"Edit \")])],1),_c('screen-canvas',{key:i,attrs:{\"canvas-width\":\"1080\",\"canvas-height\":\"1920\",\"text\":_vm.getLanguageParam(item, 'EN'),\"background-color\":item.ssBgColor,\"frame-img-url\":\"/frames/google-pixel-4-xl-black.png\",\"screen-url\":item.ssAppUrl}})],1)])}),1),_vm._l((_vm.languagesOptions),function(languageItem){return _c('div',[_c('span',{staticStyle:{\"margin\":\"12px\"}},[_vm._v(_vm._s(languageItem.label))]),_c('el-row',_vm._l((_vm.pageData),function(item,i){return _c('el-col',{key:i,attrs:{\"span\":6}},[_c('div',{staticClass:\"drop-area\",staticStyle:{\"border\":\"1px solid #e0e0e0\",\"border-radius\":\"8px\",\"margin\":\"8px\",\"display\":\"flex\",\"flex-direction\":\"column\"}},[_c('screen-canvas',{ref:'screenRefs_' + languageItem.value,refInFor:true,attrs:{\"canvas-width\":\"1080\",\"canvas-height\":\"1920\",\"text\":_vm.getLanguageParam(item, languageItem.value),\"background-color\":item.ssBgColor,\"frame-img-url\":\"/frames/google-pixel-4-xl-black.png\",\"screen-url\":item.ssAppUrl}})],1)])}),1)],1)})],2)],1),_c('el-dialog',{attrs:{\"title\":this.isAddScreen? 'Edit Screenshot': 'Add Screenshot',\"visible\":_vm.addDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event}}},[_c('el-form',{ref:\"screenshotFrom\",attrs:{\"model\":_vm.screenshotFrom}},[_c('el-form-item',{attrs:{\"label\":\"String ID\",\"prop\":\"screenshot\"}},[_c('el-input',{model:{value:(_vm.screenshotFrom.transId),callback:function ($$v) {_vm.$set(_vm.screenshotFrom, \"transId\", $$v)},expression:\"screenshotFrom.transId\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Screenshot Url\",\"prop\":\"screenshot\"}},[_c('el-input',{model:{value:(_vm.screenshotFrom.ssAppUrl),callback:function ($$v) {_vm.$set(_vm.screenshotFrom, \"ssAppUrl\", $$v)},expression:\"screenshotFrom.ssAppUrl\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Background Color(eg: #0000000)\",\"prop\":\"screenshot\"}},[_c('el-input',{model:{value:(_vm.screenshotFrom.ssBgColor),callback:function ($$v) {_vm.$set(_vm.screenshotFrom, \"ssBgColor\", $$v)},expression:\"screenshotFrom.ssBgColor\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"Cancel\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handAddScreenshot}},[_vm._v(_vm._s(_vm.isAddScreen? 'Add' : 'Update'))])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('canvas',{ref:\"screenCanvas\"},[_vm._v(\"Canvas not supported \"+_vm._s(_vm.refreshCanvas(_vm.text)))])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n  <canvas ref=\"screenCanvas\">Canvas not supported {{ refreshCanvas(text) }}</canvas>\n\n</template>\n\n<script>\nexport default {\n  props: [\"canvasWidth\", \"canvasHeight\", \"text\", \"backgroundColor\", \"frameImgUrl\", \"screenUrl\"],\n  data() {\n    return {\n    }\n  },\n  methods: {\n    refreshCanvas(data) {\n      // 自定义字体 https://www.zhihu.com/question/496036108\n      const width = this.canvasWidth; const height = this.canvasHeight;\n\n      const canvas = this.$refs.screenCanvas;\n      if (canvas == null) return\n      canvas.setAttribute(\"width\", width + \"\")\n      canvas.setAttribute(\"height\", height + \"\")\n\n\n      // canvas.style.width = this.canvasWidth / 4.5  + \"px\";\n      // canvas.style.height = this.canvasHeight / 4.5  + \"px\";\n\n      // 不支持canvas\n      if (!canvas.getContext) return\n\n      const ctx2d = canvas.getContext('2d');\n      // 绘制背景颜色\n      ctx2d.fillStyle = this.backgroundColor\n      ctx2d.fillRect(0,0, width, height);\n\n      // 选中的手机边框\n      const phoneFrame = {\n        path: this.frameImgUrl,\n        x: width * 0.05, // 外壳起点\n        y: height * 0.18,\n        width: 1564,\n        height: 3320,\n        startX: 59.4, // 内容起点\n        startY: 191.2,\n        endX: 1501.4, // 内容终点\n        endY: 3232.9,\n        extraY: 1548.8 // 关机按键\n      }\n\n      const phoneFrameToPrevScale = width * 0.9 / phoneFrame.width\n      phoneFrame.width = phoneFrame.width *  phoneFrameToPrevScale\n      phoneFrame.height = phoneFrame.height *  phoneFrameToPrevScale\n      phoneFrame.startX = phoneFrame.x + phoneFrame.startX *  phoneFrameToPrevScale\n      phoneFrame.startY = phoneFrame.y + phoneFrame.startY *  phoneFrameToPrevScale\n      phoneFrame.endX = phoneFrame.x + phoneFrame.endX *  phoneFrameToPrevScale\n      phoneFrame.endY = phoneFrame.y + phoneFrame.endY *  phoneFrameToPrevScale\n\n\n      // 绘制文字\n      if (this.text == null) this.text = \"\"\n      let text = this.text.split(\"\\\\n\")\n      if (text.length <= 1) {\n        text = this.text.split(\"\\n\") // 切换真实换行\n      }\n      ctx2d.beginPath();\n      ctx2d.fillStyle = \"#FFFFFF\"\n      ctx2d.imageSmoothingEnabled = true\n      ctx2d.imageSmoothingQuality = 'high';\n\n      ctx2d.textAlign = \"center\" // \"left\" || \"right\" || \"center\"\n      let upHeight = 64\n      for (let i = 0; i < text.length && i < 2; i++) {\n        ctx2d.font = \"bolder 74px Arial\"\n        ctx2d.fillText(text[i], width / 2, 100 * (i + 1) + upHeight, width - phoneFrame.x);\n      }\n      ctx2d.closePath()\n\n\n      // 绘制手机截图\n      var screenImg = new Image();\n      screenImg.crossOrigin = \"Anonymous\";\n      screenImg.src = this.screenUrl;\n      screenImg.onload = function () {\n        // 手机截图保证内容区拉伸占满\n        const scale = Math.max((phoneFrame.endX - phoneFrame.startX) / this.width, (phoneFrame.endY - phoneFrame.endX) / this.height)\n        // console.log(\"width: \" + (phoneFrame.endX - phoneFrame.startX) / this.width + \" height: \" + this.height + \" scale: \" + scale);\n        ctx2d.drawImage(this, phoneFrame.startX, phoneFrame.startY, this.width * scale, this.height * scale);\n\n\n        // 绘制手机边框\n        let frameImg = new Image();\n        frameImg.src = phoneFrame.path;\n        frameImg.onload = function () {\n          ctx2d.drawImage(this, phoneFrame.x, phoneFrame.y, phoneFrame.width, phoneFrame.height)\n        }\n      }\n\n    },\n    exportImages() {\n      const canvas = this.$refs.screenCanvas;\n      var dataURL = canvas.toDataURL(\"image/png\", 0.9); // 将canvas转换为data URL\n      var canvasBlob = this.dataURLtoBlob(dataURL)\n\n      let fileOfBlob = new File([canvasBlob], new Date().getTime() + '.jpg')\n      return fileOfBlob\n    },\n    dataURLtoBlob(dataurl) {\n      var arr = dataurl.split(',')\n      //注意base64的最后面中括号和引号是不转译的\n      var _arr = arr[1].substring(0, arr[1].length - 2)\n      var mime = arr[0].match(/:(.*?);/)[1],\n          bstr = atob(_arr),\n          n = bstr.length,\n          u8arr = new Uint8Array(n)\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n)\n      }\n      return new Blob([u8arr], {\n        type: mime\n      })\n    }\n  },\n  mounted() {\n    this.refreshCanvas()\n  },\n  watch: {\n    canvasWidth(newValue, oldValue) {\n      console.log('canvasWidth 变化:', newValue);\n      this.refreshCanvas(this.text)\n    },\n    canvasHeight(newValue, oldValue) {\n      console.log('canvasHeight 变化:', newValue);\n      // 处理 canvasHeight 变化的逻辑\n      this.refreshCanvas(this.text)\n    },\n    text(newValue, oldValue) {\n      console.log('text 变化:', newValue);\n      // 处理 text 变化的逻辑\n      this.refreshCanvas(this.text)\n    },\n    backgroundColor(newValue, oldValue) {\n      console.log('backgroundColor 变化:', newValue);\n      // 处理 backgroundColor 变化的逻辑\n      this.refreshCanvas(this.text)\n    },\n    frameImgUrl(newValue, oldValue) {\n      console.log('frameImgUrl 变化:', newValue);\n      // 处理 frameImgUrl 变化的逻辑\n      this.refreshCanvas(this.text)\n    },\n    screenUrl(newValue, oldValue) {\n      console.log('screenBlobImg 变化:', newValue);\n      this.refreshCanvas(this.text)\n      // 处理 screenBlobImg 变化的逻辑\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ScreenCanvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ScreenCanvas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ScreenCanvas.vue?vue&type=template&id=67625f4f&\"\nimport script from \"./ScreenCanvas.vue?vue&type=script&lang=js&\"\nexport * from \"./ScreenCanvas.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import http from \"@/utils/request\";\n\nexport const getScreenshots = (data) => {\n    return http.post(\"/screenshots/get\", data)\n}\n\nexport const addScreenshots = (data) => {\n    return http.post(\"/screenshots/insert\", data)\n}\n\nexport const updateScreenshots = (data) => {\n    return http.post(\"/screenshots/update\", data)\n}\n\nexport const deleteScreenshots = (data) => {\n    return http.post(\"/screenshots/delete\", data)\n}\n\nexport const uploadGoogle = (data) => {\n    let config = {\n        headers: {\"Content-Type\": \"multipart/form-data\"}\n    }\n    return http.postForm(\"/screenshots/upload\", data, config)\n}","<template>\n  <div class=\"container\" v-loading=\"isLoading\">\n    <div class=\"App\">\n\n      <el-card>\n\n        <div style=\"display: flex; justify-content: end; align-items: center;\">\n\n          <el-select v-model=\"languagesSelected\" filterable>\n            <el-option\n                v-for=\"item in languagesOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n            </el-option>\n          </el-select>\n\n          <el-button @click=\"downloadShell\" type=\"primary\">Download</el-button>\n          <el-button @click=\"uploadGooglePlayAll\" :loading=\"isUploadLoading\" type=\"primary\">Upload to Google Play</el-button>\n          <el-button @click=\"addDialogVisible = true; isAddScreen = true\" type=\"primary\">Add Screenshot</el-button>\n\n        </div>\n\n\n<!--        <el-button @click=\"exportImages\">English</el-button>-->\n        <el-row>\n          <el-col :span='6' v-for=\"(item, i) in pageData\" :key=\"i\">\n            <div class=\"drop-area\" style=\"border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  margin: 8px;\n  display: flex; flex-direction: column\">\n\n              <div style=\"height: 40px; background-color: white; display: flex; justify-content: space-between; align-items: center\">\n\n                <div>\n                  <el-button @click=\"handleSwap(pageData[i - 1], item)\" type=\"text\" style=\"margin-left: 16px; font-weight: bold\">{{'<'}}</el-button>\n                  <el-button @click=\"handleSwap(item, pageData[i + 1])\" type=\"text\" style=\" font-weight: bold\">{{'>'}}</el-button>\n                </div>\n\n                <el-button @click=\"addDialogVisible = true;  isAddScreen = false; screenshotFrom = item\" type=\"text\" style=\"margin: 16px; font-weight: bold\">Edit\n                </el-button>\n              </div>\n\n              <screen-canvas :key=\"i\"\n                             canvas-width=\"1080\" canvas-height=\"1920\"\n                             :text=\"getLanguageParam(item, 'EN')\"\n                             :background-color=\"item.ssBgColor\"\n                             frame-img-url=\"/frames/google-pixel-4-xl-black.png\"\n                             :screen-url=\"item.ssAppUrl\"></screen-canvas>\n            </div>\n\n          </el-col>\n        </el-row>\n\n<!--        上面是编辑区 下面是展示区-->\n\n        <div v-for=\"languageItem in languagesOptions\">\n          <span style=\"margin: 12px\">{{ languageItem.label }}</span>\n            <el-row>\n              <el-col :span='6' v-for=\"(item, i) in pageData\" :key=\"i\">\n                <div class=\"drop-area\" style=\"border: 1px solid #e0e0e0;border-radius: 8px;margin: 8px;display: flex; flex-direction: column\">\n\n                <screen-canvas :ref=\"'screenRefs_' + languageItem.value\"\n                               canvas-width=\"1080\" canvas-height=\"1920\"\n                               :text=\"getLanguageParam(item, languageItem.value)\"\n                               :background-color=\"item.ssBgColor\"\n                               frame-img-url=\"/frames/google-pixel-4-xl-black.png\"\n                               :screen-url=\"item.ssAppUrl\"></screen-canvas>\n                </div>\n\n              </el-col>\n            </el-row>\n\n        </div>\n<!--        <span style=\"margin: 12px\">{{ getLanguageName() }}</span>-->\n<!--        <div style=\"overflow-x: auto\">-->\n<!--          <screen-canvas ref=\"canvasRefs\" v-for=\"(item, i) in pageData\" :key=\"i\"-->\n<!--              canvas-width=\"1080\" canvas-height=\"1920\"-->\n<!--              style=\"margin: 12px\"-->\n<!--              :text=\"getLanguageParam(item)\"-->\n<!--              :background-color=\"item.ssBgColor\"-->\n<!--              frame-img-url=\"/frames/google-pixel-4-xl-black.png\"-->\n<!--              :screen-url=\"item.ssAppUrl\"></screen-canvas>-->\n<!--        </div>-->\n\n\n<!--        <screen-canvas canvas-width=\"1080\" canvas-height=\"1920\"-->\n<!--                       style=\"margin: 12px\"-->\n<!--                       background-color=\"#3ba7c1\"-->\n<!--                       text=\"Update \\n your productivity\"-->\n<!--                       frame-img-url=\"/frames/google-pixel-4-xl-black.png\"-->\n<!--                       screen-url=\"https://play-lh.googleusercontent.com/TL8pKfZFU-iGKozB68b8IUYJ_riBQb7E1F55QtIqOe1PQGGm8Cydsw9lY_uvZCbwGYEn=w5120-h2880-rw\"></screen-canvas>-->\n\n\n      </el-card>\n    </div>\n\n    <el-dialog\n        :title=\"this.isAddScreen? 'Edit Screenshot': 'Add Screenshot'\"\n        :visible.sync=\"addDialogVisible\"\n        width=\"30%\">\n\n      <el-form ref=\"screenshotFrom\" :model=\"screenshotFrom\">\n        <el-form-item label=\"String ID\" prop=\"screenshot\">\n          <el-input v-model=\"screenshotFrom.transId\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"Screenshot Url\" prop=\"screenshot\">\n          <el-input v-model=\"screenshotFrom.ssAppUrl\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"Background Color(eg: #0000000)\" prop=\"screenshot\">\n          <el-input v-model=\"screenshotFrom.ssBgColor\"></el-input>\n        </el-form-item>\n      </el-form>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"addDialogVisible = false\">Cancel</el-button>\n              <el-button type=\"primary\" @click=\"handAddScreenshot\">{{isAddScreen? 'Add' : 'Update'}}</el-button>\n            </span>\n    </el-dialog>\n\n\n  </div>\n</template>\n\n<script>\n\nimport languages from \"@/store/languages\";\nimport ScreenCanvas from \"@/components/ScreenCanvas\";\nimport {getScreenshots, addScreenshots, uploadGoogle, updateScreenshots} from '../../api/screenshot'\nimport FileSaver from 'file-saver'\nimport ScreenPreview from \"@/components/ScreenPreview.vue\";\n\nexport default {\n  components: {ScreenPreview, ScreenCanvas},\n  data() {\n    return {\n      isAddScreen: true,\n      isLoading: false,\n      addDialogVisible: false,\n      isUploadLoading: false,\n      languagesOptions: [],\n      languagesSelected: \"EN\",\n      pageData: [],\n      screenshotFrom: {\n        projectId: this.$route.params.id,\n        transId: 0,\n        ssAppUrl: '',\n        ssBgColor: ''\n      },\n\n    };\n  },\n  computed: {\n\n  },\n  watch: {\n    projectData(newVal, oldVal) {\n      if (this.$route.params.id == this.$store.state.tab.projectData.projectId) {\n        this.refreshPage()\n      }\n    },\n    languagesSelected(newVal, oldVal) {\n      if (newVal != oldVal) {\n        this.pageData = this.pageData\n      }\n    }\n  },\n  mounted() {\n    this.refreshPage()\n  },\n  methods: {\n\n    refreshPage() {\n      // 构建语言选择列表\n      const projectData = this.$store.state.tab.projectData;\n      if (this.$route.params.id != projectData.projectId) {\n        // 没有基础数据，暂时不处理\n        return\n      }\n\n      const set = []\n      projectData.languages.split(\",\").forEach((item) => {\n        console.log(item)\n        set.push(item.trim())\n      });\n\n      this.languagesOptions = []\n\n      Object.keys(languages.state.allLanguages).forEach((item) => {\n        if (set.includes(languages.state.languageKey[item])) {\n          this.languagesOptions.push({\n            label: languages.state.allLanguages[item],\n            value: languages.state.languageKey[item],\n          })\n        }\n      })\n\n      const request = {\n        \"projectId\": this.$route.params.id\n      }\n      getScreenshots(request).then((data) => {\n        this.isLoading = false\n        console.log(data)\n        this.pageData = data.data\n      })\n    },\n    getLanguageParam(data, key) {\n      let result = \"\"\n      console.log(key)\n      Object.keys(languages.state.languageKey).forEach((item) => {\n        if (key === languages.state.languageKey[item]) {\n          // TODO ID 错误，找不到语言，就会有问题\n          result = data.transKeys[item]\n        }\n      })\n      return result\n    },\n    getLanguageName() {\n      return languages.state.languages[this.languagesSelected]\n    },\n    handleSwap(prev, next) {\n      if (prev == null || next == null) return\n      let tmpId = prev.ssId\n      prev.ssId = next.ssId\n      next.ssId = tmpId\n\n      console.log(prev.ssId, next.ssId)\n      updateScreenshots(prev).then((data) => {\n        console.log(data)\n        updateScreenshots(next).then((data) => {\n          console.log(data)\n          let tmp = {}\n          tmp.transId = prev.transId\n          tmp.ssAppUrl = prev.ssAppUrl\n          tmp.ssBgColor = prev.ssBgColor\n\n          prev.transId = next.transId\n          prev.ssAppUrl = next.ssAppUrl\n          prev.ssBgColor = next.ssBgColor\n\n          next.transId = tmp.transId\n          next.ssAppUrl = tmp.ssAppUrl\n          next.ssBgColor = tmp.ssBgColor\n        })\n      })\n\n    },\n    handAddScreenshot() {\n      if (this.isAddScreen) {\n        addScreenshots(this.screenshotFrom).then((data) => {\n          console.log(data)\n          this.addDialogVisible = false\n        })\n      } else {\n        updateScreenshots(this.screenshotFrom).then((data) => {\n          console.log(data)\n          this.addDialogVisible = false\n        })\n      }\n    },\n    uploadGooglePlayAll() {\n      const projectData = this.$store.state.tab.projectData;\n      const set = []\n      projectData.languages.split(\",\").forEach((item) => {\n        set.push(item.trim())\n      });\n      console.log(set)\n      this.uploadGooglePlay(set, 0)\n    },\n    uploadGooglePlay(languages, index) {\n      let language = languages[index]\n      this.isUploadLoading = true\n      let files = new Array(this.$refs['screenRefs_' + language].length)\n\n      for (let i = 0; i < this.$refs['screenRefs_' + language].length; i++) {\n        files[i] = this.$refs['screenRefs_' + language][i].exportImages()\n      }\n\n      let formData = new FormData()\n      Array.from(files).forEach(file => {\n        formData.append(\"files\", file)\n        console.log(file)\n      })\n      formData.append(\"projectId\", this.$route.params.id)\n      formData.append(\"languages\", language)\n\n\n      uploadGoogle(formData).then((data) => {\n        this.isUploadLoading = false\n        console.log(data)\n        if (index < languages.length - 1) {\n          this.uploadGooglePlay(languages, index + 1)\n        }\n      })\n    },\n    formatImageUrl(data) {\n      return this.require(\"/assets/logo.png\")\n    },\n    downloadShell() {\n      var data = '#!/bin/bash\\n'\n      data += \"adb devices\";\n      const blob = new Blob([data], {type: \"text/plain;charset=utf-8\"})\n      FileSaver.saveAs(blob, \"applocalize_gen_screenshot.bat\")\n    }\n\n  },\n}\n</script>\n\n\n<style lang=\"less\" scoped>\n\n</style>","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Screenshots.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Screenshots.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Screenshots.vue?vue&type=template&id=08c90cd0&scoped=true&\"\nimport script from \"./Screenshots.vue?vue&type=script&lang=js&\"\nexport * from \"./Screenshots.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08c90cd0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["b","a","autoBom","console","warn","test","type","Blob","c","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","render","_vm","this","_c","_self","ref","_v","_s","refreshCanvas","text","staticRenderFns","props","data","methods","width","canvasWidth","height","canvasHeight","canvas","$refs","screenCanvas","setAttribute","getContext","ctx2d","fillStyle","backgroundColor","fillRect","phoneFrame","path","frameImgUrl","x","y","startX","startY","endX","endY","extraY","phoneFrameToPrevScale","split","beginPath","textAlign","upHeight","length","font","fillText","closePath","screenImg","Image","crossOrigin","reader","event","src","screenBlobImg","scale","Math","max","drawImage","frameImg","log","exportImages","dataURL","toDataURL","canvasBlob","dataURLtoBlob","fileOfBlob","File","Date","getTime","dataurl","arr","_arr","substring","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","mounted","computed","watch","newValue","oldValue","component","directives","rawName","value","isLoading","expression","staticClass","staticStyle","attrs","model","languagesSelected","callback","$$v","_l","languagesOptions","item","key","label","on","downloadShell","isUploadLoading","uploadGooglePlayAll","$event","addDialogVisible","isAddScreen","pageData","handleSwap","screenshotFrom","getLanguageParam","ssBgColor","ssAppUrl","languageItem","refInFor","transId","$set","slot","handAddScreenshot","imageSmoothingEnabled","imageSmoothingQuality","screenUrl","getScreenshots","http","post","addScreenshots","updateScreenshots","uploadGoogle","config","headers","postForm","components","ScreenPreview","ScreenCanvas","projectId","$route","params","id","projectData","newVal","oldVal","$store","state","tab","refreshPage","set","languages","forEach","push","trim","Object","keys","allLanguages","includes","languageKey","request","then","transKeys","getLanguageName","prev","next","tmpId","ssId","tmp","uploadGooglePlay","index","language","files","Array","formData","FormData","from","file","append","formatImageUrl","require","blob","FileSaver"],"sourceRoot":""}